<section xml:id="objects_public-private"
         xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Information Hiding</title>

  <subsection><title>Access Modifiers</title>

  <p>In a class, the keywords <pf>private</pf> and <pf>public</pf> are known as <term>access modifiers</term> and are used to
    define what parts of a class are visible to code outside of that class. Using <pf>public:</pf> in a
    class says <q>everything from here until the next access modifier is visible</q>. Using
    <pf>private:</pf> <q>everything from here until the next access modifier is hidden</q>. </p>
    
    <program label="objects_public-private-program-1" line-numbers="yes">
class Sample {
private:
    int m_variable1;  // private
    int m_variable2;  // private
public:
    int m_variable3;  // public
    int m_variable4;  // public
    int m_variable5;  // public
private:
    int m_variable6;  // private
};
</program>

  <p>If you do not specify an access modifier, the default modifier applied to members of a class is <pf>private</pf>. So the reason <xref ref="objects_classes-1-listing"/> did not work is because the compiler assumed the variables should be <pf>private</pf>:</p>

  <listing>
    <program label="objects_public-private-program-2" line-numbers="yes" highlight-lines="2,10" interactive="activecode">
class Point {
private:   // Compiler assumed this
    //member variables
    double m_x;
    double m_y;
};

int main() {
    Point p1;
    p1.m_x = 3.0;  // Error: m_x is private
}
</program>
  </listing>

  <p>
    Because the compiler assumed the variables should be private, the code in main (line 10) that tries to access <pf>m_x</pf> directly results in a compilation error. It is a syntax error for code outside of a class to try to access members of that class that were defined in a private block.
  </p>

  <p>We could make the code compile by changing line 4 to say <pf>public:</pf>. Go ahead and try it.</p>


</subsection>
<subsection><title>Why use Private</title>

  <p>So why do we bother with private member variables at all? Why not just make everything public and let code access whatever it wants?</p>
  
  <p>To understand why, we need to remember what object-oriented programming was designed to accomplish. It was designed to help make it easier to write and use code in large programs. Part of how it supports this is by giving us tools to manage the complexity of code.
  </p>

  <p>One form of complexity is the <term>coupling</term> of code. We say that code is <term>tightly coupled</term> when one part depends on all of the details of other parts of the code. <term>Loosely coupled</term> coupled code is the opposite. It is when any given part of the code depends on as few details of other parts as possible.</p>

  <p>
    Say we are working with a <pf>Point</pf> class. If code outside of the Point class is directly accessing the member variables <pf>m_x</pf> and <pf>m_y</pf>, then that code is tightly coupled to the implementation details of the Point class. It depends on knowing that Point stores its data as two double values named <pf>m_x</pf> and <pf>m_y</pf>.
  </p>

  <p>
    That has two consequences:
    <ul>
      <li>First, if we want to change how Point stores its data, we have to find all of the code that is directly accessing <pf>m_x</pf> and <pf>m_y</pf> and change that code as well.</li>
      <li>Second, the programmer who is working on the code that is using Point objects has to understand all of the details of how Point works. They have to know that Point has member variables named <pf>m_x</pf> and <pf>m_y</pf>, what those variables mean, what values are valid for them, etc...</li>
    </ul>
  </p>

  <p>Making the member variables private helps to enforce this boundary. Outside code is not allowed to tightly couple with the details of the Point class.</p>

  <insight>
    <p>Remember to imagine every object-oriented program as being written by multiple
      programmers. The programmer who is working on the Point class might be different than the
      programmer who is working on the code that is using Point objects. By making member variables
      private, the Point programmer can enforce a boundary between the code that <q>knows the
      details</q> of how Point works and the code that does not know or depend on those details.
    </p>
  </insight>

  
  <exercise label="objects_public-private-ex-1">
    <statement>
      <p>Which is considered to generally lead to better software design?</p>
    </statement>
    <choices randomize="yes">
      <choice correct="yes">
        <statement>
          <p>Loosly coupled code.</p>
        </statement>
        <feedback>
          Correct. Loosely coupled code is easier to work on and maintain. A change in one part of the code is less likely to break other parts of the code.
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>Tightly coupled code.</p>
        </statement>
        <feedback>
          Tightly coupled code is harder to work on and maintain. A change in one part of the code is more likely to break other parts of the code.
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>Uncoupled code.</p>
        </statement>
        <feedback>
          That is not a thing.
        </feedback>
      </choice>
    </choices>
  </exercise>

    <exercise label="objects_public-private-ex-2">
      <statement>
        <p>What are some of the benefits of information hiding?</p>
      </statement>
      <choices randomize="yes">
        <choice>
          <statement>
            <p>It keeps code secret from other programmers and users.</p>
          </statement>
          <feedback>
            Incorrect! <q>hiding</q> is not a great term for what we are really doing. <q>protecting</q> might be a better description. The code is still there and can be read by other programmers. They just can't access it directly.
          </feedback>
        </choice>
        <choice correct="yes">
          <statement>
            <p>It makes it easier to change implementation details of a class without breaking code that uses the class.</p>
          </statement>
        </choice>
        <choice correct="yes">
          <statement>
            <p>It allows us to enforce boundaries between code that <q>knows the details</q> of a particular type and code that does not know or depend on those details.</p>
          </statement>
        </choice>
      </choices>
    </exercise>

    </subsection>
</section>